@use "sass:color";
@use "./variables" as *;

:root {
    --background: #{$background};
    --foreground: #{$foreground};
}

html,
body {
    width: 100%;
    min-height: 100vh;
}

*::selection {
    background: $golden;
    color: $background;
}

body {
    margin: 0;
    font-family: $font-family-serif;
    background-color: var(--background);
    background-image: radial-gradient(ellipse at 50% 10%, color.change(color.mix($pink, $red, 60%), $alpha: 0.25) 0%, color.change($background, $alpha: 0) 70%);
    color: var(--foreground);
    contain: paint;
}

a {
    color: $links;
}

pre,
code {
    font-family: $font-family-mono;
}

@media (min-resolution: 144dpi) {
    body:not(.mobile-device) :root {
        --crt-scanline-width: 1px;
        --crt-scanline-gap: 2px;
        --crt-aberration-offset: 1.8px;
        --crt-moving-scanline-height: 0.8px;
    }
}

@media (min-resolution: 240dpi) {
    body:not(.mobile-device) :root {
        --crt-scanline-gap: 3px;
        --crt-aberration-offset: 2.4px;
        --crt-moving-scanline-height: 1px;
    }
}

@media (min-resolution: 336dpi) {
    body:not(.mobile-device) :root {
        --crt-scanline-gap: 4px;
        --crt-aberration-offset: 3.6px;
    }
}

// Wordpress styles, picked from
// https://github.com/mandrasch/sveltekit-headless-wp-rest-demo/blob/main/src/scss/_gutenberg-wrapper-container.scss
// galleries
.wp-content {
    // css vars
    --wp--style--global--content-size: 750px;
    --wp--style--global--wide-size: 1200px;

    --wp--style--block-gap: 1.5rem;

    &>*+* {
        // https://developer.mozilla.org/en-US/docs/Web/CSS/margin-block-start
        margin-block-start: 1.5rem;
        margin-block-end: 0;
    }

    // original: body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
    &> :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
        max-width: var(--wp--style--global--content-size);
        margin-left: auto !important;
        margin-right: auto !important;
    }

    // TODO: do we get these styles from somewhere?
    // fix for .alignwide, not in block library styles?
    .alignwide {
        max-width: 1200px; // TODO: use var
        margin-left: auto;
        margin-right: auto;
    }

    .alignfull {
        max-width: 100%;
        margin-left: 0;
        margin-right: 0;
    }

    .aligncenter {
        margin-left: auto !important;
        margin-right: auto !important;
    }

    .alignleft {
        float: left;
        margin-inline-start: 0;
        margin-inline-end: 2em;
    }

    .alignright {
        float: right;
        margin-inline-start: 2em;
        margin-inline-end: 0;
    }

    // galleries
    .wp-block-gallery {
        --wp--style--unstable-gallery-gap: var(--wp--style--gallery-gap-default,
                var(--gallery-block--gutter-size, var(--wp--style--block-gap, 0.5em)));
        gap: var(--wp--style--gallery-gap-default,
                var(--gallery-block--gutter-size, var(--wp--style--block-gap, 0.5em)));
    }

    .is-layout-flex {
        display: flex;
        flex-wrap: wrap;
    }

    .figure.wp-block-gallery.has-nested-images {
        align-items: normal;
    }
}
