:root {
    --crt-background: #0f1419;
    --crt-glow-color: rgba(0, 150, 150, .12);
    --crt-scanline-opacity: 0.15;
    --crt-scanline-width: 1px;
    --crt-scanline-gap: 1px;
    --crt-moving-scanline-color: hsla(0, 0%, 100%, .15);
    --crt-flicker-opacity: 0.01;
    --crt-text-color: rgba(120, 255, 120, .7);
    --crt-curvature: 0px;
    --crt-vignette-opacity: 0.15;
    --crt-aberration-offset: 1.2px;
    --crt-aberration-opacity: 0.05;
    --crt-moving-scanline-height: 0.6px;
    --header-glow-color: rgba(120, 255, 150, .4);
}

@keyframes flicker {
    0% { opacity: 0; }
    5% { opacity: var(--crt-flicker-opacity); }
    10% { opacity: 0; }
    15% { opacity: var(--crt-flicker-opacity); }
    20% { opacity: 0; }
    30% { opacity: 0; }
    50% { opacity: 0; }
    70% { opacity: var(--crt-flicker-opacity); }
    80% { opacity: 0; }
    90% { opacity: var(--crt-flicker-opacity); }
    to { opacity: 0; }
}

@keyframes noise {
    0%, to { background-position: 0 0; }
    20% { background-position: 20% 20%; }
    40% { background-position: -20% -30%; }
    60% { background-position: 30% 10%; }
    80% { background-position: -30% 30%; }
}

@keyframes crt-flicker {
    0% { opacity: 1; }
    1% { opacity: .985; }
    2% { opacity: .995; }
    3% { opacity: .99; }
    4% { opacity: 1; }
    30% { opacity: 1; }
    31% { opacity: .985; }
    32% { opacity: .99; }
    33% { opacity: 1; }
    80% { opacity: 1; }
    81% { opacity: .99; }
    82% { opacity: .98; }
    83% { opacity: 1; }
    to { opacity: 1; }
}

@keyframes chromatic-shift {
    0% { transform: translate(var(--crt-aberration-offset)); }
    25% { transform: translate(calc(var(--crt-aberration-offset) * .9), calc(var(--crt-aberration-offset) * .1)); }
    50% { transform: translate(var(--crt-aberration-offset)); }
    75% { transform: translate(calc(var(--crt-aberration-offset) * 1.1), calc(var(--crt-aberration-offset) * -.1)); }
    to { transform: translate(var(--crt-aberration-offset)); }
}

@keyframes scanline-drift {
    0% { background-position: 0 0; }
    to { background-position: 0 2px; }
}

.crt-effect {
    border-radius: var(--crt-curvature);
    // box-shadow: 0 0 0 30px #000;
    height: 100%;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    position: fixed;
    width: 100%;
    z-index: 100000;

    &:before {
        background: repeating-linear-gradient(0deg, rgba(0, 0, 0, var(--crt-scanline-opacity)), rgba(0, 0, 0, var(--crt-scanline-opacity)) var(--crt-scanline-width), transparent var(--crt-scanline-width), transparent calc(var(--crt-scanline-width) + var(--crt-scanline-gap)));
        content: "";
        display: block;
        height: 100%;
        inset: 0;
        mix-blend-mode: multiply;
        opacity: .7;
        pointer-events: none;
        position: absolute;
        width: 100%;
        z-index: 100000;
    }

    &:after {
        background: repeating-linear-gradient(90deg, rgba(0, 0, 0, calc(var(--crt-scanline-opacity) * .7)), rgba(0, 0, 0, calc(var(--crt-scanline-opacity) * .7)) var(--crt-scanline-width), transparent var(--crt-scanline-width), transparent calc(var(--crt-scanline-width) + var(--crt-scanline-gap)));
        content: "";
        display: block;
        height: 100%;
        inset: 0;
        mix-blend-mode: multiply;
        opacity: .7;
        pointer-events: none;
        position: absolute;
        width: 100%;
        z-index: 100000;
    }
}

.crt-scanline {
    background: linear-gradient(180deg, hsla(0, 0%, 100%, .01), hsla(0, 0%, 100%, .2) 50%, hsla(0, 0%, 100%, .01));
    box-shadow: 0 0 2px hsla(0, 0%, 100%, .15);
    content: "";
    height: var(--crt-moving-scanline-height);
    left: 0;
    mix-blend-mode: screen;
    opacity: .3;
    pointer-events: none;
    position: fixed;
    top: -20px;
    transform: translateY(0);
    transition: transform 0s linear;
    width: 100%;
    z-index: 100001;
}

.crt-flicker {
    animation: crt-flicker 10s infinite;
    background-color: transparent;
    height: 100%;
    left: 0;
    mix-blend-mode: overlay;
    pointer-events: none;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100003;

    &:after {
        animation: flicker 15s infinite;
        background: rgba(255, 255, 255, var(--crt-flicker-opacity));
        content: "";
        height: 100%;
        left: 0;
        mix-blend-mode: normal;
        opacity: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
}

.crt-vignette {
    background: radial-gradient(ellipse at center, transparent 70%, rgba(0, 0, 0, .08) 100%);
    height: 100%;
    left: 0;
    mix-blend-mode: multiply;
    pointer-events: none;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100005;
}

.crt-noise {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYSFCkEKYR5NwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFMklEQVRo3u2aTYgbVRTHf+flJQUndtLYmcxkPpJMptA2yUx2XRT8QBFajFSUQhciCo1F62Zdl9UuXLhwIbgSRF1YLNSFVApaqrW2Cwr9oO20adPOJJN8TjNJJpnk3S7mZQpCmfH1FcwPDrx3Lzfv/s9999xz7oWfZDT+JLBOnAL0vDT93AcXI8DBCvUupOmcAQ4BDgGmLaXbAD4CMICzY7j61/iUMZWPmYsZbSMhFQZg2sK+oXcW3NkUfQ/4CjiKQ8DJxBKjKmLdJjV9uVYTKnUhkhLysSahAI9HiU7OC/GE0EoJkbSQjQmRuGRTwjomFOJCNS4kk0I2IeRiQiEqTEUk0pXFwffjwEZTEO0Knu5A/8/w7ReQW4TlzXB4HIoVuLgEk3MQb8OeLpgegsXrML4Ikj6Y0BYV6Ai87MJLj0FkFob7Ye80zL0Hh0bh+2tQexLefRa+OQXHx+GLl+DkfiicgxtFmChB4jroZekZhAe2wcNRoAMDCsQ2QukqJKYhfQFOPw6n9sFYAZbfgL2d8MmLkF2ApRT0/Qjb/wQdyP5rG/VtMsRBbxTM7fDVFFydg/k6JFNwKQBTXjicgYFu6M7A5DXIzoEuVLHoiYB0CqsZILIJUg3IRSCoQG8HZLpgOgNXzsCFUXhgN3QJYAlUDPoioHcAfmDVUjJQGQmA/jXw6tABEIZnHoWPz0O9BNF7YUc35AswM4dpSlJSmkCdJeKQqcHGLMR7oNcAVYFXAnA5D2tnwF+Eb4IwNQVJBdQIfg1MkoCvDukq1JwQ0MG0QK2CkYbSw5AchONfQ3YCDh2ETzNQbEA6CgcPYIZNgnqVdFFKFMCnQxDYW4GaA6a/7m7eJAS7oVwCFT4Pw8VzsH8U5qdg72MwfAaG34LMT1CehFgTMHDQqFHVaigFhVAO/ChYDexqE4orUKpD7Dp0bIL0TsjkYWEBigvQGIChBtzog8UEZA0wI1i0V4yp1DQm5yktY0KVtBQYXQDrQsi1PiLzsGcOTs7DlXlYuwuGYjAQg5k4TK2D9xZUi9i0t0EZhbwUMFDGJzVpEjYr6Kt3nBVgJQ25ALQaEAhDow7JCNgikIqCfxHu3ogx3Yfa4aIppdYW0W0ZEj5oiDCl++hRhHhKqKwK9SpCyYS5Fuy4fIcAUyZYAnNegZUitv9W8BWQU2DSgzQsAj5hdAHeq2FrNfjZhYFRSBSAxRL0Z2GpF3wFcuZdRKROa9HBUhWUILQrUFN4rQ3RUTjRCefrYJyFkztgvAwlwCcCyjC++t+I6A62ZR+2NQciQtgCzYAuHVp3QTUGHVVYa0GkCisZcKwK1gpYdcCt/38Hf9V5GQPLs1i6hoMiLRHKFliNwPtCVBHMuPBqCcoetPJCwcS0LUwFgmq9nUYCLEyhTQ1a3jJKpEmHFRCM2pDwwb4MnMtBYx52JSH1AGTdEEcHPwjtuaG1vc7LcnAoS2ihRsVrE1WFliNUCkK1FyIZGPPA1vGb35tFdkWEtfVQe3yFuRvkWwPkXYtCy89UExZdJ2HNyX1+A6PXYdmC+9zCeBkYLtJe1Lj6R29jXYHrJcgXABseFWFNF0ouODYHhQ6MiLDR8feSbzeiqeCZH9DbBt5k+cZDCc01Ia44iYiw7IO1Eo77q7/dPZpZWNsDaQO78CPN1XlSOZfDaZs9KUG78Zt+14JQWoBEHDIWhtZm3W5P87D9Bqm0QT3t5mTagCrWbypOgdZuDdOW32zfV4xpRXHz5eLWDaHa5L8CXv2J9pP8Ij8ALHQWw2ReQZEAAAAASUVORK5CYII=");
    background-repeat: repeat;
    height: calc(100% + 500px);
    left: -500px;
    opacity: .05;
    pointer-events: none;
    position: fixed;
    top: -500px;
    width: calc(100% + 500px);
    z-index: 100006;
}

.crt-aberration {
    height: 100%;
    left: 0;
    mix-blend-mode: screen;
    opacity: var(--crt-aberration-opacity);
    pointer-events: none;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100007;

    &:after,
    &:before {
        background: inherit;
        content: "";
        display: block;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
    }

    &:before {
        background: rgba(255, 0, 0, .08);
        mix-blend-mode: screen;
        transform: translate(calc(-1 * var(--crt-aberration-offset)), 0);
    }

    &:after {
        animation: chromatic-shift 3s ease-in-out infinite;
        background: rgba(0, 0, 255, .08);
        mix-blend-mode: screen;
        transform: translate(var(--crt-aberration-offset));
    }
}

.crt-persistence {
    background: rgba(150, 255, 150, .01);
    height: 100%;
    left: 0;
    mix-blend-mode: screen;
    pointer-events: none;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100008;
}

@keyframes crt-glitch {
    0%, to { filter: brightness(1.06) contrast(1.08) saturate(1.12); }
    20% { filter: brightness(1.12) contrast(1.12) saturate(.95); }
    40% { filter: brightness(1.04) contrast(1.18) saturate(1.15); }
    60% { filter: brightness(1.1) contrast(1.04) saturate(1.08); }
}
